# Generated by Django 5.2.8 on 2025-11-08 16:22

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ConfiguracionSistema',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('clave', models.CharField(max_length=100, unique=True)),
                ('valor', models.TextField()),
                ('tipo', models.CharField(choices=[('string', 'Texto'), ('integer', 'Número'), ('boolean', 'Booleano'), ('json', 'JSON'), ('float', 'Decimal'), ('time', 'Hora'), ('date', 'Fecha')], max_length=50)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('categoria', models.CharField(choices=[('general', 'General'), ('seguridad', 'Seguridad'), ('notificaciones', 'Notificaciones'), ('backup', 'Backup'), ('horarios', 'Horarios'), ('red', 'Red')], default='general', max_length=50)),
                ('editable', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Configuración del Sistema',
                'verbose_name_plural': 'Configuraciones del Sistema',
            },
        ),
        migrations.CreateModel(
            name='Departamento',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=100)),
                ('descripcion', models.TextField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Dispositivo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=200)),
                ('numero_serie', models.CharField(max_length=100, unique=True)),
                ('tipo_dispositivo', models.CharField(choices=[('huella', 'Lector de Huella'), ('tarjeta', 'Lector de Tarjeta'), ('facial', 'Reconocimiento Facial'), ('iris', 'Escáner de Iris'), ('multi', 'Multibiométrico'), ('pin', 'PIN')], max_length=20)),
                ('area_ubicacion', models.CharField(max_length=200)),
                ('direccion_fisica', models.TextField(blank=True, null=True)),
                ('direccion_ip', models.GenericIPAddressField()),
                ('zona_horaria', models.CharField(default='America/Buenos_Aires', max_length=50)),
                ('intervalo_solicitud', models.IntegerField(default=5, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(60)])),
                ('estado', models.CharField(choices=[('activo', 'Activo'), ('pausado', 'Pausado'), ('error', 'Error'), ('sin_conexion', 'Sin Conexión'), ('apagado', 'Apagado'), ('mantenimiento', 'En Mantenimiento')], default='activo', max_length=15)),
                ('ultima_conexion', models.DateTimeField(blank=True, null=True)),
                ('ultima_sincronizacion', models.DateTimeField(blank=True, null=True)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('fecha_instalacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Dispositivo',
                'verbose_name_plural': 'Dispositivos',
                'ordering': ['sede', 'nombre'],
            },
        ),
        migrations.CreateModel(
            name='Sede',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=200)),
                ('tipo', models.CharField(choices=[('sede', 'Sede Principal'), ('oficina', 'Oficina'), ('area', 'Área Específica'), ('almacen', 'Almacén')], max_length=20)),
                ('codigo_unico', models.CharField(max_length=50, unique=True)),
                ('direccion', models.TextField(blank=True, null=True)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('dispositivo_biometrico', models.CharField(choices=[('huella', 'Lector de Huella Dactilar'), ('tarjeta', 'Tarjeta de Acceso'), ('pin', 'PIN')], default='huella', max_length=20)),
                ('nivel_seguridad', models.CharField(choices=[('bajo', 'Bajo'), ('medio', 'Medio'), ('alto', 'Alto')], default='medio', max_length=10)),
            ],
        ),
        migrations.CreateModel(
            name='Auditoria',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('accion', models.CharField(choices=[('login', 'Inicio de Sesión'), ('logout', 'Cierre de Sesión'), ('crear', 'Creación'), ('modificar', 'Modificación'), ('eliminar', 'Eliminación'), ('acceso', 'Acceso a Recurso'), ('exportar', 'Exportación'), ('importar', 'Importación')], max_length=20)),
                ('modelo', models.CharField(max_length=100)),
                ('objeto_id', models.IntegerField(blank=True, null=True)),
                ('descripcion', models.TextField()),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('fecha_accion', models.DateTimeField(auto_now_add=True)),
                ('usuario', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Auditoría',
                'verbose_name_plural': 'Auditorías',
                'ordering': ['-fecha_accion'],
            },
        ),
        migrations.CreateModel(
            name='Empleado',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('id_empleado', models.CharField(max_length=50, unique=True)),
                ('nombre_completo', models.CharField(max_length=200)),
                ('foto', models.ImageField(blank=True, null=True, upload_to='empleados/')),
                ('correo_corporativo', models.EmailField(max_length=254)),
                ('telefono', models.CharField(blank=True, max_length=20, null=True)),
                ('dni', models.CharField(blank=True, max_length=20, null=True)),
                ('cargo', models.CharField(max_length=100)),
                ('fecha_ingreso', models.DateField()),
                ('nivel_seguridad', models.CharField(choices=[('bajo', 'Bajo'), ('medio', 'Medio'), ('alto', 'Alto')], default='medio', max_length=10)),
                ('estado', models.CharField(choices=[('activo', 'Activo'), ('inactivo', 'Inactivo'), ('suspendido', 'Suspendido'), ('vacaciones', 'Vacaciones'), ('licencia', 'Licencia')], default='activo', max_length=15)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('departamento', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='sistema.departamento')),
                ('superior', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='subordinados', to='sistema.empleado')),
                ('usuario', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('sede', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='sistema.sede')),
            ],
            options={
                'verbose_name': 'Empleado',
                'verbose_name_plural': 'Empleados',
                'ordering': ['nombre_completo'],
            },
        ),
        migrations.CreateModel(
            name='Credencial',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_credencial', models.CharField(choices=[('huella', 'Huella Dactilar'), ('tarjeta', 'Tarjeta de Acceso'), ('pin', 'PIN'), ('facial', 'Reconocimiento Facial'), ('iris', 'Escaneo de Iris'), ('voz', 'Reconocimiento de Voz')], max_length=20)),
                ('hash_huella', models.TextField(blank=True, null=True)),
                ('numero_tarjeta', models.CharField(blank=True, max_length=100, null=True, unique=True)),
                ('pin', models.CharField(blank=True, max_length=50, null=True)),
                ('template_facial', models.TextField(blank=True, null=True)),
                ('template_iris', models.TextField(blank=True, null=True)),
                ('template_voz', models.TextField(blank=True, null=True)),
                ('activa', models.BooleanField(default=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_expiracion', models.DateTimeField(blank=True, null=True)),
                ('fecha_ultimo_uso', models.DateTimeField(blank=True, null=True)),
                ('empleado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='credenciales', to='sistema.empleado')),
            ],
            options={
                'verbose_name': 'Credencial',
                'verbose_name_plural': 'Credenciales',
                'unique_together': {('empleado', 'tipo_credencial')},
            },
        ),
        migrations.CreateModel(
            name='Notificacion',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titulo', models.CharField(max_length=200)),
                ('mensaje', models.TextField()),
                ('tipo_notificacion', models.CharField(choices=[('alerta', 'Alertas del Sistema'), ('dispositivo', 'Estado de Dispositivos'), ('seguridad', 'Eventos de Seguridad'), ('sistema', 'Actualizaciones del Sistema'), ('usuario', 'Actividad de Usuarios'), ('acceso', 'Registro de Acceso'), ('reporte', 'Reporte Generado')], max_length=20)),
                ('prioridad', models.CharField(choices=[('critica', 'Crítica'), ('alta', 'Alta'), ('media', 'Media'), ('baja', 'Baja'), ('informativa', 'Informativa')], max_length=15)),
                ('leida', models.BooleanField(default=False)),
                ('archivada', models.BooleanField(default=False)),
                ('url_accion', models.CharField(blank=True, max_length=500, null=True)),
                ('recurso_id', models.IntegerField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_leida', models.DateTimeField(blank=True, null=True)),
                ('usuario', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notificaciones', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Notificación',
                'verbose_name_plural': 'Notificaciones',
                'ordering': ['-fecha_creacion'],
            },
        ),
        migrations.CreateModel(
            name='RegistroAcceso',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fecha_hora', models.DateTimeField(default=django.utils.timezone.now)),
                ('estado', models.CharField(choices=[('exitoso', 'Exitoso'), ('fallido', 'Fallido'), ('pendiente', 'Pendiente')], max_length=15)),
                ('tipo_acceso', models.CharField(choices=[('entrada', 'Entrada'), ('salida', 'Salida')], default='entrada', max_length=10)),
                ('nivel_confianza', models.FloatField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0.0), django.core.validators.MaxValueValidator(1.0)])),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('intento', models.IntegerField(default=1)),
                ('fecha_registro', models.DateTimeField(auto_now_add=True)),
                ('credencial', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sistema.credencial')),
                ('dispositivo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sistema.dispositivo')),
                ('empleado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sistema.empleado')),
                ('sede', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sistema.sede')),
            ],
            options={
                'verbose_name': 'Registro de Acceso',
                'verbose_name_plural': 'Registros de Acceso',
                'ordering': ['-fecha_hora'],
            },
        ),
        migrations.CreateModel(
            name='Alerta',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titulo', models.CharField(max_length=200)),
                ('mensaje', models.TextField()),
                ('tipo_alerta', models.CharField(choices=[('dispositivo', 'Estado de Dispositivo'), ('seguridad', 'Evento de Seguridad'), ('sistema', 'Actualización del Sistema'), ('usuario', 'Actividad de Usuarios'), ('mantenimiento', 'Mantenimiento del Sistema'), ('acceso', 'Evento de Acceso'), ('red', 'Problema de Red')], max_length=20)),
                ('prioridad', models.CharField(choices=[('critica', 'Crítica'), ('alta', 'Alta'), ('media', 'Media'), ('baja', 'Baja'), ('informativa', 'Informativa')], max_length=15)),
                ('leida', models.BooleanField(default=False)),
                ('archivada', models.BooleanField(default=False)),
                ('resuelta', models.BooleanField(default=False)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_leida', models.DateTimeField(blank=True, null=True)),
                ('fecha_resuelta', models.DateTimeField(blank=True, null=True)),
                ('dispositivo', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='sistema.dispositivo')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='sistema.empleado')),
                ('registro_acceso', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='sistema.registroacceso')),
            ],
            options={
                'verbose_name': 'Alerta',
                'verbose_name_plural': 'Alertas',
                'ordering': ['-fecha_creacion'],
            },
        ),
        migrations.CreateModel(
            name='Reporte',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre', models.CharField(max_length=200)),
                ('tipo_reporte', models.CharField(choices=[('asistencia', 'Reporte de Asistencia'), ('accesos', 'Reporte de Accesos'), ('dispositivos', 'Reporte de Dispositivos'), ('seguridad', 'Reporte de Seguridad'), ('empleados', 'Reporte de Empleados'), ('alertas', 'Reporte de Alertas')], max_length=20)),
                ('parametros', models.JSONField(default=dict)),
                ('programado', models.BooleanField(default=False)),
                ('frecuencia', models.CharField(blank=True, max_length=50, null=True)),
                ('formato', models.CharField(choices=[('pdf', 'PDF'), ('excel', 'Excel'), ('csv', 'CSV')], default='pdf', max_length=10)),
                ('incluir_datos', models.BooleanField(default=True)),
                ('incluir_resumen', models.BooleanField(default=True)),
                ('incluir_graficos', models.BooleanField(default=False)),
                ('incluir_filtros', models.BooleanField(default=False)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('ultima_ejecucion', models.DateTimeField(blank=True, null=True)),
                ('ejecuciones_completadas', models.IntegerField(default=0)),
                ('usuario', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Reporte',
                'verbose_name_plural': 'Reportes',
                'ordering': ['-fecha_creacion'],
            },
        ),
        migrations.AddField(
            model_name='dispositivo',
            name='sede',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='sistema.sede'),
        ),
        migrations.AddField(
            model_name='departamento',
            name='sede',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='departamentos', to='sistema.sede'),
        ),
        migrations.CreateModel(
            name='SolicitudSoporte',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nombre_completo', models.CharField(max_length=200)),
                ('email', models.EmailField(max_length=254)),
                ('telefono', models.CharField(blank=True, max_length=20, null=True)),
                ('categoria', models.CharField(choices=[('tecnico', 'Problema Técnico'), ('cuenta', 'Problema con la Cuenta'), ('biometrico', 'Problema con el biométrico'), ('funcionalidad', 'Error de Funcionalidad'), ('dispositivo', 'Falla de Dispositivo'), ('acceso', 'Problema de Acceso'), ('otro', 'Otro')], max_length=20)),
                ('asunto', models.CharField(max_length=200)),
                ('descripcion', models.TextField()),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('en_proceso', 'En Proceso'), ('resuelto', 'Resuelto'), ('cerrado', 'Cerrado')], default='pendiente', max_length=20)),
                ('prioridad', models.CharField(choices=[('critica', 'Crítica'), ('alta', 'Alta'), ('media', 'Media'), ('baja', 'Baja'), ('informativa', 'Informativa')], default='media', max_length=15)),
                ('respuesta', models.TextField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True)),
                ('fecha_cierre', models.DateTimeField(blank=True, null=True)),
                ('dispositivo', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='sistema.dispositivo')),
                ('empleado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='sistema.empleado')),
                ('tecnico_asignado', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Solicitud de Soporte',
                'verbose_name_plural': 'Solicitudes de Soporte',
                'ordering': ['-fecha_creacion'],
            },
        ),
        migrations.CreateModel(
            name='HorarioLaboral',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('dia_semana', models.IntegerField(choices=[(1, 'Lunes'), (2, 'Martes'), (3, 'Miércoles'), (4, 'Jueves'), (5, 'Viernes'), (6, 'Sábado'), (7, 'Domingo')])),
                ('hora_entrada', models.TimeField()),
                ('hora_salida', models.TimeField()),
                ('tolerancia_entrada', models.IntegerField(default=15)),
                ('tolerancia_salida', models.IntegerField(default=15)),
                ('activo', models.BooleanField(default=True)),
                ('empleado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='horarios', to='sistema.empleado')),
            ],
            options={
                'verbose_name': 'Horario Laboral',
                'verbose_name_plural': 'Horarios Laborales',
                'unique_together': {('empleado', 'dia_semana')},
            },
        ),
        migrations.AddIndex(
            model_name='registroacceso',
            index=models.Index(fields=['fecha_hora', 'empleado'], name='sistema_reg_fecha_h_d1fb81_idx'),
        ),
        migrations.AddIndex(
            model_name='registroacceso',
            index=models.Index(fields=['estado', 'dispositivo'], name='sistema_reg_estado_4e037e_idx'),
        ),
    ]
